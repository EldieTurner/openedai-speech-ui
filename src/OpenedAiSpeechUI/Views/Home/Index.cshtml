@model OpenedAiSpeechUI.Models.TTSViewModel
@{
    ViewData["Title"] = "Text-to-Speech Converter";
}

<h2>@ViewData["Title"]</h2>

<form asp-action="Index" method="post">
    <div>
        <label for="Request.Input">Text to Convert:</label><br />
        <textarea id="Request.Input" name="Request.Input" rows="10" cols="80">@Model.Request.Input</textarea>
        <span asp-validation-for="Request.Input" class="text-danger"></span>
    </div>

    <div>
        <label for="Request.Model">Model:</label>
        <select id="Request.Model" name="Request.Model">
            <option value="tts-1" selected="@(Model.Request.Model == "tts-1")">tts-1 (Piper)</option>
            <option value="tts-1-hd" selected="@(Model.Request.Model == "tts-1-hd")">tts-1-hd (High Definition)</option>
        </select>
    </div>

    <div>
        <label for="Request.Voice">Voice:</label>
        <select id="Request.Voice" name="Request.Voice">
            <option value="alloy" selected="@(Model.Request.Voice == "alloy")">alloy</option>
            <option value="echo" selected="@(Model.Request.Voice == "echo")">echo</option>
            <option value="fable" selected="@(Model.Request.Voice == "fable")">fable</option>
            <option value="onyx" selected="@(Model.Request.Voice == "onyx")">onyx</option>
            <option value="nova" selected="@(Model.Request.Voice == "nova")">nova</option>
            <option value="shimmer" selected="@(Model.Request.Voice == "shimmer")">shimmer</option>
        </select>
    </div>

    <div>
        <label for="Request.ResponseFormat">Response Format:</label>
        <select id="Request.ResponseFormat" name="Request.ResponseFormat">
            <option value="mp3" selected="@(Model.Request.ResponseFormat == "mp3")">mp3</option>
            <option value="opus" selected="@(Model.Request.ResponseFormat == "opus")">opus</option>
            <option value="aac" selected="@(Model.Request.ResponseFormat == "aac")">aac</option>
            <option value="flac" selected="@(Model.Request.ResponseFormat == "flac")">flac</option>
            <option value="wav" selected="@(Model.Request.ResponseFormat == "wav")">wav</option>
            <option value="pcm" selected="@(Model.Request.ResponseFormat == "pcm")">pcm</option>
        </select>
    </div>

    <div>
        <label for="Request.Speed">Speed:</label>
        <input type="number" step="0.1" id="Request.Speed" name="Request.Speed" value="@Model.Request.Speed" />
    </div>

    <fieldset>
        <legend>Advanced Options (for tts-1-hd model)</legend>
        <div>
            <label for="Request.Temperature">Temperature:</label>
            <input type="number" step="0.01" id="Request.Temperature" name="Request.Temperature" value="@Model.Request.Temperature" />
        </div>
        <div>
            <label for="Request.TopP">Top P:</label>
            <input type="number" step="0.01" id="Request.TopP" name="Request.TopP" value="@Model.Request.TopP" />
        </div>
        <div>
            <label for="Request.TopK">Top K:</label>
            <input type="number" id="Request.TopK" name="Request.TopK" value="@Model.Request.TopK" />
        </div>
        <div>
            <label for="Request.LengthPenalty">Length Penalty:</label>
            <input type="number" step="0.01" id="Request.LengthPenalty" name="Request.LengthPenalty" value="@Model.Request.LengthPenalty" />
        </div>
        <div>
            <label for="Request.RepetitionPenalty">Repetition Penalty:</label>
            <input type="number" step="0.01" id="Request.RepetitionPenalty" name="Request.RepetitionPenalty" value="@Model.Request.RepetitionPenalty" />
        </div>
    </fieldset>

    <button type="submit">Convert to Speech</button>
</form>

@if (!string.IsNullOrEmpty(Model.AudioFilePath))
{
    <h3>Audio Playback</h3>
    <audio controls>
        <source src="@Model.AudioFilePath" type="audio/mpeg" />
        Your browser does not support the audio element.
    </audio>
}

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
